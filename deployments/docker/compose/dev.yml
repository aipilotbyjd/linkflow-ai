# ============================================================================
# LinkFlow AI - Development Environment
# ============================================================================
# Usage: make dev
# Exposes all service ports for local debugging
# ============================================================================

services:

  # ==========================================================================
  # DATA LAYER (Expose ports for local tools)
  # ==========================================================================

  postgres:
    ports:
      - "5432:5432"

  redis:
    ports:
      - "6379:6379"

  zookeeper:
    ports:
      - "2181:2181"

  kafka:
    ports:
      - "9092:9092"

  elasticsearch:
    ports:
      - "9200:9200"
      - "9300:9300"

  # ==========================================================================
  # EDGE LAYER
  # ==========================================================================

  kong:
    ports:
      - "8000:8000"     # Proxy
      - "8443:8443"     # Proxy SSL
      - "8001:8001"     # Admin API
      - "8444:8444"     # Admin SSL

  # ==========================================================================
  # APPLICATION LAYER (All ports exposed for debugging)
  # ==========================================================================

  auth:
    ports:
      - "8001:8001"

  gateway:
    ports:
      - "8080:8000"

  user:
    ports:
      - "8002:8002"

  workflow:
    ports:
      - "8004:8004"

  execution:
    ports:
      - "8003:8003"

  node:
    ports:
      - "8005:8005"

  executor:
    ports:
      - "8007:8007"

  webhook:
    ports:
      - "8008:8008"

  schedule:
    ports:
      - "8009:8009"

  credential:
    ports:
      - "8010:8010"

  notification:
    ports:
      - "8011:8011"

  integration:
    ports:
      - "8012:8012"

  analytics:
    ports:
      - "8013:8013"

  search:
    ports:
      - "8014:8014"

  storage:
    ports:
      - "8015:8015"

  config:
    ports:
      - "8016:8016"

  admin:
    ports:
      - "8017:8017"

  tenant:
    ports:
      - "8019:8019"

  monitoring:
    ports:
      - "8020:8020"

  backup:
    ports:
      - "8021:8021"

  migration:
    ports:
      - "8022:8022"

  # ==========================================================================
  # MONITORING (All ports exposed)
  # ==========================================================================

  prometheus:
    ports:
      - "9090:9090"

  grafana:
    ports:
      - "3000:3000"

  jaeger:
    ports:
      - "16686:16686"   # UI
      - "4317:4317"     # OTLP gRPC
      - "4318:4318"     # OTLP HTTP

  # ==========================================================================
  # ADMIN TOOLS
  # ==========================================================================

  adminer:
    ports:
      - "8089:8080"

  kafka-ui:
    ports:
      - "8088:8080"
